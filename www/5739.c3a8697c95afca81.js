"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5739],{5739:(_,u,a)=>{a.r(u),a.d(u,{BienvenidoPageModule:()=>C});var r=a(177),h=a(4341),o=a(791),l=a(8986),t=a(3953),m=a(7355),p=a(1626);let g=(()=>{class s{constructor(e){this.http=e,this.apiUrl="http://localhost:3001/api"}getClasses(e){return this.http.get(`${this.apiUrl}/${e}`)}generateQRCode(e){return this.http.post(`${this.apiUrl}/classes/qr`,e)}attendClass(e){return this.http.post(`${this.apiUrl}/attendance/qr`,e)}static#t=this.\u0275fac=function(i){return new(i||s)(t.KVO(p.Qq))};static#e=this.\u0275prov=t.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function f(s,d){if(1&s){const e=t.RV6();t.j41(0,"ion-card")(1,"ion-card-content")(2,"div",7)(3,"div",8),t.nrm(4,"ion-icon",9),t.j41(5,"h5",10),t.EFF(6),t.k0s()()(),t.j41(7,"div",11)(8,"div",12),t.nrm(9,"ion-icon",13),t.j41(10,"span"),t.EFF(11),t.nI1(12,"date"),t.k0s()(),t.j41(13,"div",14),t.nrm(14,"ion-icon",15),t.j41(15,"span"),t.EFF(16),t.k0s()()(),t.j41(17,"div",16)(18,"ion-button",17),t.bIt("click",function(){const n=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.generateQR(n.id))}),t.nrm(19,"ion-icon",18),t.EFF(20," Asistencia "),t.k0s()()()()}if(2&s){const e=d.$implicit,i=t.XpG(2);t.R7$(6),t.JRh(e.name),t.R7$(5),t.JRh(t.i5U(12,3,e.startTime,"HH:mm")),t.R7$(5),t.JRh(i.user.name)}}function v(s,d){if(1&s&&(t.j41(0,"section",4)(1,"div",5),t.DNE(2,f,21,6,"ion-card",6),t.k0s()()),2&s){const e=t.XpG();t.R7$(2),t.Y8G("ngForOf",e.classes)}}function F(s,d){if(1&s){const e=t.RV6();t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t.EFF(3,"C\xf3digo QR"),t.k0s(),t.j41(4,"ion-buttons",19)(5,"ion-button",3),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.closeModal())}),t.EFF(6,"Cerrar"),t.k0s()()()(),t.j41(7,"ion-content",20)(8,"h2",21),t.EFF(9),t.k0s(),t.j41(10,"div",22),t.nrm(11,"img",23),t.k0s()()}if(2&s){const e=t.XpG();t.R7$(9),t.JRh(null==e.selectedClass?null:e.selectedClass.name),t.R7$(2),t.Y8G("src",e.qrCodeUrl,t.B4B)}}const b=[{path:"",component:(()=>{class s{constructor(e,i,n){this.router=e,this.authService=i,this.classService=n,this.photos=[],this.qrCodeUrl="",this.selectedClass=null,this.isModalOpen=!1}ngOnInit(){this.getUserData(),this.getClasses()}getUserData(){const e=this.authService.getUserData();this.user=e,console.log(this.user)}generateQR(e){this.classService.generateQRCode({class_id:e}).subscribe(n=>{this.qrCodeUrl=n.url,this.selectedClass=this.classes.find(c=>c.id===e),this.isModalOpen=!0})}closeModal(){this.isModalOpen=!1,this.qrCodeUrl=""}getClasses(){this.classService.getClasses("classes").subscribe(e=>{const i=e.classes;console.log(i);const n=i.filter(c=>c.teacher_id===this.user.id);this.classes=n})}logout(){this.authService.logout(),this.router.navigate(["/home"])}goRoute(){this.router.navigate(["/apirestt"])}static#t=this.\u0275fac=function(i){return new(i||s)(t.rXU(l.Ix),t.rXU(m.u),t.rXU(g))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-bienvenido"]],decls:13,vars:3,consts:[[1,"ion-no-border","m-top:","[10px]",2,"background-color","#E1EAF9"],["class","mt-5 px-1",4,"ngIf"],[3,"didDismiss","isOpen"],[3,"click"],[1,"mt-5","px-1"],[1,"grid","grid-cols-2","gap-1"],[4,"ngFor","ngForOf"],[1,"flex","justify-between","items-center","mb-3"],[1,"flex","items-center","space-x-2"],["name","book-outline","color","primary","size","medium"],[1,"text-black"],[1,"mb-4"],[1,"flex","items-center","text-sm","text-black","space-x-2"],["name","time-outline","color","medium"],[1,"flex","items-center","text-sm","text-black","space-x-2","mt-2"],["name","person-outline","color","medium"],[1,"text-right"],["fill","solid","size","small","color","primary",1,"rounded-full","shadow-md",3,"click"],["slot","start","name","qr-code-outline"],["slot","end"],[1,"ion-padding","text-center"],[1,"text-lg","font-bold","mb-4"],[1,"flex","justify-center"],["alt","C\xf3digo QR",1,"w-60","h-60","object-contain",3,"src"]],template:function(i,n){1&i&&(t.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-label")(3,"h2"),t.EFF(4,"RegistrApp"),t.k0s(),t.j41(5,"p"),t.EFF(6),t.k0s()()()(),t.j41(7,"ion-content"),t.DNE(8,v,3,1,"section",1),t.j41(9,"ion-modal",2),t.bIt("didDismiss",function(){return n.closeModal()}),t.DNE(10,F,12,2,"ng-template"),t.k0s(),t.j41(11,"ion-button",3),t.bIt("click",function(){return n.logout()}),t.EFF(12,"Logout"),t.k0s()()),2&i&&(t.R7$(6),t.SpI("Bienvenido, ",n.user.name,"!"),t.R7$(2),t.Y8G("ngIf",!n.user.isStudent),t.R7$(),t.Y8G("isOpen",n.isModalOpen))},dependencies:[r.Sq,r.bT,o.Jm,o.QW,o.b_,o.I9,o.W9,o.eU,o.iq,o.he,o.BC,o.ai,o.Sb,r.vh]})}return s})()}];let j=(()=>{class s{static#t=this.\u0275fac=function(i){return new(i||s)};static#e=this.\u0275mod=t.$C({type:s});static#s=this.\u0275inj=t.G2t({imports:[l.iI.forChild(b),l.iI]})}return s})(),C=(()=>{class s{static#t=this.\u0275fac=function(i){return new(i||s)};static#e=this.\u0275mod=t.$C({type:s});static#s=this.\u0275inj=t.G2t({imports:[r.MD,h.YN,o.bv,j]})}return s})()}}]);